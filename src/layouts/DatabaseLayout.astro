---
import type { CollectionEntry } from 'astro:content';
import moment from 'moment';

// Layouts
import BaseLayout from '@/layouts/BaseLayout.astro';

// Components
import { Icon } from 'astro-icon/components';

// Types
type Props = {
  title: string;
  total: number;
  list: CollectionEntry<'puzzles'>[];
};

// Injects
const { title, total, list } = Astro.props;
---

<BaseLayout
  title={`${title} - FUTURE 攻坚组`}
  og={{
    basic: {
      title: `${title} - FUTURE 攻坚组`,
      type: 'website',
      image: '/favicon.svg',
      url: Astro.request.url
    }
  }}>
  <main
    class="flex flex-col gap-4 mx-4 my-12 lg:min-w-[768px] lg:mx-auto lg:w-1/2">
    <h1 class="font-bold text-2xl">{title} ({total})</h1>
    <div class="gap-4 grid md:grid-cols-2">
      {
        list.map(({ slug, data }) => (
          <a
            class="border border-neutral-600 flex items-center justify-between p-4 rounded-lg text-white hover:bg-neutral-800 hover:text-white"
            href={`/puzzles/${slug}`}
            title={data.title}>
            <div class="flex flex-col gap-2">
              <h1 class="font-bold text-lg">{data.title}</h1>
              <div class="flex gap-1 items-center text-neutral-500 text-sm">
                <Icon name="mdi:calendar" />
                <span>{moment(data.published_at).format('YYYY/MM/DD')}</span>
              </div>
            </div>
            {data.report ? (
              <Icon class="text-5xl text-neutral-700" name="mdi:box-variant" />
            ) : (
              <Icon
                class="text-5xl text-neutral-500"
                name="mdi:box-variant-closed"
              />
            )}
          </a>
        ))
      }
    </div>
    <div
      class="font-bold mb-auto text-center text-neutral-800 text-sm select-none">
      End of Database
    </div>
  </main>
</BaseLayout>
